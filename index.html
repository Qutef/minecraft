<!DOCTYPE html><html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Soundpad Web</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 2em;
      background: #e0e7ff;
    }
    .sound-button, .menu-button {
      display: inline-block;
      margin: 10px;
      padding: 15px 25px;
      font-size: 16px;
      border-radius: 12px;
      border: none;
      background-color: #4f46e5;
      color: white;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .sound-button:hover, .menu-button:hover {
      background-color: #4338ca;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }
    .sound-card {
      background: white;
      border-radius: 16px;
      padding: 1em;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      min-width: 200px;
    }
    .hidden {
      display: none;
    }
    .volume-label {
      font-size: 14px;
      margin-top: 0.5em;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>Soundpad Web</h1>  <div id="mainMenu" class="grid"></div>  <div id="soundMenu" class="hidden">
    <h2 id="soundTitle"></h2>
    <p id="volumeTag"></p>
    <div class="grid">
      <button id="m1" class="menu-button" onclick="playSound(currentSound.loud.file)">Слушать (оригинал)`</button>
      <a id="dlLoud" class="menu-button" download>Скачать (оригинал)</a><br>
      <button class="menu-button" onclick="playSound(currentSound.quiet.file)">Слушать (отрегулировано)</button>
      <a id="dlQuiet" class="menu-button" download>Скачать (отрегулировано)</a><br>
      <button class="menu-button" onclick="stopSound()">Остановить</button>
    </div>
    <br>
    <button onclick="goBack()" class="menu-button">Назад</button>
  </div>  <script>

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const buffers = {};
    let currentSource = null;
    let currentSound = null;

    const sounds = {
      sound1: {
        title: "Звук 1",
        loud: { file: "sound1_loud.mp3", label: "Громко" },
        quiet: { file: "sound1_quiet.mp3"}
      },
      sound2: {
        title: "Звук 2",
        loud: { file: "sound2_loud.mp3", label: "Тихо" },
        quiet: { file: "sound2_quiet.mp3"}
      }
    };

    function renderMainMenu() {
      const container = document.getElementById('mainMenu');
      container.innerHTML = '';
      for (const key in sounds) {
        const sound = sounds[key];
        const card = document.createElement('div');
        card.className = 'sound-card';

        const title = document.createElement('h3');
        title.textContent = sound.title;
        card.appendChild(title);

        const volume = document.createElement('p');
        volume.className = 'volume-label';
        volume.textContent = `Громкость: ${sound.loud.label}`;
        card.appendChild(volume);

        const btn = document.createElement('button');
        btn.className = 'sound-button';
        btn.textContent = 'Открыть';
        btn.onclick = () => openMenu(key);
        card.appendChild(btn);

        container.appendChild(card);
      }
    }

    async function loadAudio(file) {
      if (buffers[file]) return buffers[file];
      try {
        const response = await fetch(file);
        const arrayBuffer = await response.arrayBuffer();
        buffers[file] = await audioCtx.decodeAudioData(arrayBuffer);
        return buffers[file];
      } catch (err) {
        alert("Ошибка загрузки файла: " + file);
        return null;
      }
    }

    async function playSound(file) {
      const audioBuffer = await loadAudio(file);
      if (!audioBuffer) return;

      stopSound();

      const source = audioCtx.createBufferSource();
      source.buffer = audioBuffer;
      source.connect(audioCtx.destination);
      source.start();

      currentSource = source;
    }

    function stopSound() {
      if (currentSource) {
        currentSource.stop();
        currentSource = null;
      }
    }

    function openMenu(key) {
      stopSound();
      currentSound = sounds[key];
      document.getElementById('soundTitle').textContent = currentSound.title;
      document.getElementById('volumeTag').textContent = `Громкость: ${currentSound.loud.label}`;
      document.getElementById('dlLoud').href = currentSound.loud.file;
      document.getElementById('dlQuiet').href = currentSound.quiet.file;

      document.getElementById('mainMenu').classList.add('hidden');
      document.getElementById('soundMenu').classList.remove('hidden');
    }

    function goBack() {
      stopSound();
      document.getElementById('soundMenu').classList.add('hidden');
      document.getElementById('mainMenu').classList.remove('hidden');
    }

    renderMainMenu();
  </script></body>
</html>
